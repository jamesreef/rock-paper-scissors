<!DOCTYPE html>
<html>
    <head>
        <title>Rock, paper, scissors!</title>
    </head>
    <body>
        <script>
        let playerSelection;
        let computerSelection = computerPlay();         
        let computerScore = 0;
        let playerScore = 0;

        function getRandomValue() {
        return Math.floor(Math.random() * 3) + 1; 
        }

        function computerPlay() {
            if (getRandomValue() == 1) {
                return "rock";
            } else if (getRandomValue() == 2) {
                return "paper";
            } else {
                return "scissors";
            }
        } 

        function playRound(playerSelection, computerSelection) {
            playerSelection = prompt("Rock, paper, scissors?").toLowerCase();
            if ((computerSelection === "rock" && playerSelection === "rock") || (computerSelection === "paper" && playerSelection === "paper") || (computerSelection === "scissors" && playerSelection === "scissors")) {
                return "It's a tie!";
            } else if ((computerSelection === "paper" && playerSelection === "rock") || (computerSelection == "scissors" && playerSelection === "paper") || (computerSelection == "rock" && playerSelection === "scissors")) {
                computerScore++;
                return "Computer wins this round!";
            } else if ((playerSelection === "paper" && computerSelection === "rock") || (playerSelection === "scissors" && computerSelection === "paper") || (playerSelection == "rock" && computerSelection === "scissors")) {
                playerScore++;
                return "You win this round!";
            } else {
                return "You have to choose your weapon!";
            }
        }

        function game() {
            while (playerScore <= 3 && computerScore <= 3) {
            alert(playRound(playerSelection, computerSelection))
            if (playerScore == 3) {
                console.log("You win with " + playerScore + " to " + computerScore + ". Refresh the page to play again!");
                break;
            } else if (computerScore == 3) {
                console.log("You lose this time. Computer's score: " + computerScore + " Your score: " + playerScore + ". Refresh the page to play again!");
                break;
            }
            }
        }
        game();
        </script>
    </body>
</html>